<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é­”æ³•ç”Ÿæ—¥å€’è®¡æ—¶</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        fairyPink: '#FF6B8B',
                        fairyBlue: '#6BBEF5',
                        fairyPurple: '#B794F4',
                        fairyGreen: '#6BCB77',
                        fairyYellow: '#FFD93D',
                        fairyOrange: '#FF9F43',
                        fairyTeal: '#4DD0E1',
                    },
                    fontFamily: {
                        fairy: ['Comic Sans MS', 'Marker Felt', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .fairy-shadow {
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1), 0 8px 25px rgba(0, 0, 0, 0.05);
            }
            .fairy-border {
                border: 2px dashed white;
            }
            .text-shadow-fairy {
                text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
            }
            .hover-pop {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .hover-pop:hover {
                transform: translateY(-5px) scale(1.02);
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            }
            .animate-float {
                animation: float 6s ease-in-out infinite;
            }
            @keyframes float {
                0% { transform: translateY(0px); }
                50% { transform: translateY(-10px); }
                100% { transform: translateY(0px); }
            }
            .animate-pulse-slow {
                animation: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            }
            .countdown-glow {
                text-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
            }
        }
    </style>
    <style>
        /* ç«¥è¯é£æ ¼çš„æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #f9f4f8;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #FF6B8B, #B794F4);
            border-radius: 10px;
            border: 2px solid #f9f4f8;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #ff527a, #a376e0);
        }

        /* é¡µé¢è¿‡æ¸¡åŠ¨ç”» */
        .page {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        .page.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* éŸ³ä¹æ’­æ”¾å™¨æ ·å¼å¢å¼º */
        .music-player {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 30px;
            transition: all 0.3s ease;
        }
        .music-player:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        .music-progress {
            height: 6px;
            border-radius: 3px;
            background: #f0f0f0;
            overflow: hidden;
            cursor: pointer;
        }
        .music-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FF6B8B, #B794F4);
            transition: width 0.1s linear;
        }
        .music-button {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        .music-button:hover {
            transform: scale(1.1);
            background: rgba(255, 107, 139, 0.1);
        }
        .music-track-info {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* ç”Ÿæ—¥å¡ç‰‡æ ·å¼ - ç«¥è¯é£æ ¼ */
        .birthday-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: hidden;
            position: relative;
        }
        .birthday-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            transition: height 0.3s ease;
        }
        .birthday-card:hover::before {
            height: 8px;
        }
        .birthday-card::after {
            content: '';
            position: absolute;
            top: 15px;
            right: 15px;
            width: 30px;
            height: 30px;
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0.5;
            transition: all 0.3s ease;
        }
        .birthday-card:hover::after {
            transform: rotate(10deg) scale(1.1);
            opacity: 0.8;
        }

        /* ä¸åŒé¢œè‰²ä¸»é¢˜çš„å¡ç‰‡è£…é¥° */
        .theme-pink {
            border-top: 4px solid #FF6B8B;
        }
        .theme-pink::before {
            background: #FF6B8B;
        }
        .theme-pink::after {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FF6B8B'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E");
        }

        .theme-blue {
            border-top: 4px solid #6BBEF5;
        }
        .theme-blue::before {
            background: #6BBEF5;
        }
        .theme-blue::after {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%236BBEF5'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z'/%3E%3C/svg%3E");
        }

        .theme-purple {
            border-top: 4px solid #B794F4;
        }
        .theme-purple::before {
            background: #B794F4;
        }
        .theme-purple::after {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23B794F4'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5-9h10v2H7z'/%3E%3C/svg%3E");
        }

        .theme-green {
            border-top: 4px solid #6BCB77;
        }
        .theme-green::before {
            background: #6BCB77;
        }
        .theme-green::after {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%236BCB77'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z'/%3E%3C/svg%3E");
        }

        .theme-yellow {
            border-top: 4px solid #FFD93D;
        }
        .theme-yellow::before {
            background: #FFD93D;
        }
        .theme-yellow::after {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FFD93D'%3E%3Cpath d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'/%3E%3C/svg%3E");
        }

        .theme-orange {
            border-top: 4px solid #FF9F43;
        }
        .theme-orange::before {
            background: #FF9F43;
        }
        .theme-orange::after {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FF9F43'%3E%3Cpath d='M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5H5v2h14v-2h-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z'/%3E%3C/svg%3E");
        }

        .theme-teal {
            border-top: 4px solid #4DD0E1;
        }
        .theme-teal::before {
            background: #4DD0E1;
        }
        .theme-teal::after {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234DD0E1'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z'/%3E%3C/svg%3E");
        }

        /* å³å°†åˆ°æ¥çš„ç”Ÿæ—¥æ ·å¼ */
        .upcoming-birthday {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.85));
            backdrop-filter: blur(10px);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.5s ease;
        }
        .upcoming-birthday:hover {
            transform: translateY(-5px);
        }
        .upcoming-header {
            position: relative;
            overflow: hidden;
        }
        .upcoming-header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0,0,0,0.1), rgba(0,0,0,0.2));
        }
        .upcoming-avatar {
            width: 90px;
            height: 90px;
            border: 4px solid white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.5s ease;
        }
        .upcoming-birthday:hover .upcoming-avatar {
            transform: scale(1.05) rotate(3deg);
        }
        .countdown-box-upcoming {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .countdown-box-upcoming:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }

        /* ç²’å­èƒŒæ™¯ */
        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0.5;
            animation: float 8s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }

        /* å¤´åƒä¸Šä¼ åŒºåŸŸæ ·å¼ */
        .avatar-upload-container {
            transition: all 0.3s ease;
        }
        .avatar-upload-container:hover {
            transform: scale(1.02);
        }
        .avatar-preview {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .avatar-preview:hover::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50 font-fairy text-gray-800 min-h-screen">
    <!-- ç²’å­èƒŒæ™¯ -->
    <div id="particles-container" class="fixed inset-0 z-0"></div>

    <!-- å¯¼èˆªæ  -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md shadow-sm transition-all duration-300">
        <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center">
                <button id="navToggle" class="p-2 rounded-full hover:bg-pink-50 transition-colors">
                    <i class="fa fa-magic text-fairyPink text-xl"></i>
                </button>
                <h1 class="ml-3 text-xl font-bold bg-gradient-to-r from-fairyPink to-fairyPurple bg-clip-text text-transparent">é­”æ³•æ—¶å…‰</h1>
            </div>
            
            <!-- éŸ³ä¹æ’­æ”¾å™¨ -->
            <div class="music-player flex items-center px-4 py-2 hidden md:flex">
                <button class="music-button text-fairyPink" id="prevTrack">
                    <i class="fa fa-step-backward"></i>
                </button>
                <button class="music-button text-fairyPink mx-1" id="playPauseBtn">
                    <i class="fa fa-play"></i>
                </button>
                <button class="music-button text-fairyPink" id="nextTrack">
                    <i class="fa fa-step-forward"></i>
                </button>
                
                <div class="mx-3 flex-1 min-w-[120px] max-w-[200px]">
                    <div class="music-track-info text-sm text-gray-700" id="currentTrack">ç­‰å¾…æ’­æ”¾...</div>
                    <div class="music-progress mt-1">
                        <div class="music-progress-fill" id="progressBar" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="flex items-center">
                    <i class="fa fa-volume-up text-gray-600 mr-2"></i>
                    <input type="range" id="volumeSlider" min="0" max="100" value="70" class="w-20 accent-fairyPink">
                </div>
            </div>
        </div>
        
        <!-- å¯¼èˆªèœå• -->
        <div id="navItems" class="hidden absolute top-full left-0 right-0 bg-white shadow-lg py-4 px-6 flex flex-col md:hidden">
            <button id="homeNav" class="nav-item text-left py-3 px-4 hover:bg-pink-50 rounded-lg transition-colors">
                <i class="fa fa-home mr-2 text-fairyPink"></i> é¦–é¡µ
            </button>
            <button id="birthdayNav" class="nav-item text-left py-3 px-4 hover:bg-pink-50 rounded-lg transition-colors">
                <i class="fa fa-birthday-cake mr-2 text-fairyPink"></i> ç”Ÿæ—¥å€’è®¡æ—¶
            </button>
            <button id="galleryNav" class="nav-item text-left py-3 px-4 hover:bg-pink-50 rounded-lg transition-colors">
                <i class="fa fa-university mr-2 text-fairyPink"></i> ç”Ÿæ—¥å±•é¦†
            </button>
            <div class="mt-2 pt-2 border-t border-gray-100">
                <div class="flex items-center px-4">
                    <button class="music-button text-fairyPink" id="mobilePlayPauseBtn">
                        <i class="fa fa-play"></i>
                    </button>
                    <input type="range" id="mobileVolumeSlider" min="0" max="100" value="70" class="w-24 ml-2 accent-fairyPink">
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»é¡µ -->
    <div id="homePage" class="page min-h-screen pt-20 pb-16 px-4 relative z-10 active">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-16 pt-10">
                <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold mb-6 text-shadow-fairy">
                    è®°å½•æ¯ä¸€ä¸ªç‰¹åˆ«çš„<span class="bg-gradient-to-r from-fairyPink to-fairyPurple bg-clip-text text-transparent">ç”Ÿæ—¥</span>æ—¶åˆ»
                </h1>
                <p class="text-gray-600 max-w-2xl mx-auto text-lg mb-8">
                    ç”¨é­”æ³•ä¿å­˜çè´µçš„ç”Ÿæ—¥è®°å¿†ï¼Œå†ä¹Ÿä¸ä¼šå¿˜è®°é‡è¦çš„æ—¥å­
                </p>
                <button id="mainStartBtn" class="bg-gradient-to-r from-fairyPink to-fairyPurple text-white font-bold py-3 px-8 rounded-full shadow-lg hover-pop ripple">
                    å¼€å§‹ä½¿ç”¨ <i class="fa fa-magic ml-2"></i>
                </button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
                <div class="bg-white rounded-2xl p-6 fairy-shadow hover-pop">
                    <div class="w-16 h-16 rounded-full bg-gradient-to-r from-fairyPink to-fairyPurple flex items-center justify-center mx-auto mb-4">
                        <i class="fa fa-clock-o text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mt-2 mb-3 text-center">å€’è®¡æ—¶æé†’</h3>
                    <p class="text-gray-600 text-center mb-6">
                        ç²¾ç¡®è®¡ç®—æ¯ä¸ªç”Ÿæ—¥çš„å€’è®¡æ—¶ï¼Œæå‰åšå¥½å‡†å¤‡ï¼Œä¸é”™è¿‡ä»»ä½•æƒŠå–œæ—¶åˆ»ã€‚
                    </p>
                    <button id="goToBirthdayBtn" class="bg-gradient-to-r from-fairyPink to-fairyPurple text-white font-bold py-3 px-6 rounded-full w-full hover-pop">
                        æŸ¥çœ‹å€’è®¡æ—¶ <i class="fa fa-arrow-right ml-2"></i>
                    </button>
                </div>

                <div class="bg-white rounded-2xl p-6 fairy-shadow hover-pop">
                    <div class="w-16 h-16 rounded-full bg-gradient-to-r from-fairyBlue to-fairyTeal flex items-center justify-center mx-auto mb-4">
                        <i class="fa fa-heart text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mt-2 mb-3 text-center">çè´µå›å¿†</h3>
                    <p class="text-gray-600 text-center mb-6">
                        è®°å½•æ¯ä¸€ä¸ªç‰¹åˆ«çš„ç”Ÿæ—¥ç¬é—´ï¼Œæ·»åŠ ç…§ç‰‡å’Œç¬”è®°ï¼Œçè—ç¾å¥½å›å¿†ã€‚
                    </p>
                    <button id="startJourneyBtn" class="bg-gradient-to-r from-fairyBlue to-fairyTeal text-white font-bold py-3 px-6 rounded-full w-full hover-pop">
                        å¼€å§‹è®°å½• <i class="fa fa-star ml-2"></i>
                    </button>
                </div>

                <div class="bg-white rounded-2xl p-6 fairy-shadow hover-pop">
                    <div class="w-16 h-16 rounded-full bg-gradient-to-r from-fairyGreen to-fairyYellow flex items-center justify-center mx-auto mb-4">
                        <i class="fa fa-picture-o text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mt-2 mb-3 text-center">ç”Ÿæ—¥å±•é¦†</h3>
                    <p class="text-gray-600 text-center mb-6">
                        åœ¨å±•é¦†ä¸­æŸ¥çœ‹æ‰€æœ‰ç”Ÿæ—¥ç»Ÿè®¡ï¼Œå‘ç°ç”Ÿæ—¥åˆ†å¸ƒè§„å¾‹ï¼Œæ„Ÿå—æ—¶å…‰çš„é­”æ³•ã€‚
                    </p>
                    <button id="goToGalleryBtn" class="bg-gradient-to-r from-fairyGreen to-fairyYellow text-white font-bold py-3 px-6 rounded-full w-full hover-pop">
                        è¿›å…¥å±•é¦† <i class="fa fa-university ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- å³å°†åˆ°æ¥çš„ç”Ÿæ—¥ -->
            <div class="mt-16">
                <h2 class="text-2xl font-bold text-center mb-8 text-shadow-fairy">
                    <i class="fa fa-calendar-check-o text-fairyPink mr-2"></i>å³å°†åˆ°æ¥çš„ç”Ÿæ—¥
                </h2>
                <div id="upcomingBirthdays" class="max-w-4xl mx-auto">
                    <!-- å³å°†åˆ°æ¥çš„ç”Ÿæ—¥å†…å®¹ -->
                </div>
            </div>

            <footer class="mt-16 py-6 text-center text-gray-500 relative z-10">
                <p>é­”æ³•æ—¶å…‰ - çè—ç”Ÿæ´»ä¸­çš„æ¯ä¸€åˆ»</p>
                <p class="mt-2 text-sm">æ‰€æœ‰æ•°æ®å®‰å…¨å­˜å‚¨åœ¨æ‚¨çš„è®¾å¤‡ä¸Š</p>
            </footer>
        </div>
    </div>

    <!-- ç”Ÿæ—¥åˆ—è¡¨é¡µé¢ -->
    <div id="birthdayPage" class="page min-h-screen pt-20 pb-24 px-4 relative z-10">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-10">
                <h1 class="text-[clamp(1.8rem,4vw,3rem)] font-bold mb-4 text-shadow-fairy bg-gradient-to-r from-fairyPink to-fairyPurple bg-clip-text text-transparent">ç”Ÿæ—¥å€’è®¡æ—¶</h1>
                <p class="text-gray-600">è®°å½•å¹¶è¿½è¸ªé‡è¦çš„ç”Ÿæ—¥æ—¥æœŸ</p>
                <p class="text-gray-500 mt-2">å·²è®°å½• <span id="birthdayCount" class="font-bold text-fairyPink">0</span> ä¸ªç”Ÿæ—¥</p>
            </div>

            <!-- æœ€è¿‘ç”Ÿæ—¥ -->
            <div class="bg-white rounded-2xl p-6 fairy-shadow mb-10" id="nearestBirthdayContainer">
                <h2 class="text-xl font-bold text-gray-700 mb-4 flex items-center">
                    <i class="fa fa-star text-fairyYellow mr-2"></i> å³å°†åˆ°æ¥
                </h2>
                <div id="nearestBirthday" class="py-4">
                    <p class="text-gray-500 text-center">æ·»åŠ ç¬¬ä¸€ä¸ªç”Ÿæ—¥æ¥å¼€å§‹å€’è®¡æ—¶</p>
                </div>
            </div>

            <!-- ç”Ÿæ—¥åˆ—è¡¨ -->
            <h2 class="text-2xl font-bold text-gray-700 mb-6 flex items-center text-shadow-fairy">
                <i class="fa fa-list-ul text-fairyPink mr-2"></i> ç”Ÿæ—¥åˆ—è¡¨
            </h2>
            <div id="birthdaysList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16">
                <!-- ç”Ÿæ—¥å¡ç‰‡å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                <div class="text-center text-gray-500 py-12 bg-white rounded-2xl fairy-shadow">
                    <i class="fa fa-calendar-o text-4xl mb-4 opacity-30"></i>
                    <p>è¿˜æ²¡æœ‰æ·»åŠ ä»»ä½•ç”Ÿæ—¥è®°å½•</p>
                    <button id="secondaryStartBtn" class="mt-4 bg-gradient-to-r from-fairyPink to-fairyPurple text-white font-bold py-2 px-6 rounded-full hover-pop">æ·»åŠ ç¬¬ä¸€ä¸ªç”Ÿæ—¥</button>
                </div>
            </div>
        </div>
    </div>

    <!-- å±•é¦†é¡µé¢ -->
    <div id="galleryPage" class="page min-h-screen pt-20 pb-16 px-4 relative z-10">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-10">
                <h1 class="text-[clamp(1.8rem,4vw,3rem)] font-bold mb-4 text-shadow-fairy bg-gradient-to-r from-fairyGreen to-fairyBlue bg-clip-text text-transparent">ç”Ÿæ—¥å±•é¦†</h1>
                <p class="text-gray-600">æ¢ç´¢å’Œç»Ÿè®¡æ‰€æœ‰ç”Ÿæ—¥æ•°æ®</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                <div class="bg-white rounded-2xl p-6 fairy-shadow hover-pop">
                    <h3 class="text-gray-500 mb-2">æ€»è®°å½•æ•°</h3>
                    <p id="profileBirthdayCount" class="text-3xl font-bold text-gray-700">0</p>
                </div>
                <div class="bg-white rounded-2xl p-6 fairy-shadow hover-pop">
                    <h3 class="text-gray-500 mb-2">æœ¬æœˆç”Ÿæ—¥</h3>
                    <p id="profileThisMonth" class="text-3xl font-bold text-gray-700">0</p>
                </div>
                <div class="bg-white rounded-2xl p-6 fairy-shadow hover-pop">
                    <h3 class="text-gray-500 mb-2">30å¤©å†…</h3>
                    <p id="profileUpcoming" class="text-3xl font-bold text-gray-700">0</p>
                </div>
            </div>
            
            <div class="bg-white rounded-2xl p-6 fairy-shadow mb-8">
                <h3 class="text-xl font-bold text-gray-700 mb-6">æœˆä»½åˆ†å¸ƒ</h3>
                <div class="grid grid-cols-3 sm:grid-cols-6 lg:grid-cols-12 gap-4">
                    <div class="text-center p-3 bg-gray-50 rounded-lg hover-pop">
                        <div class="text-sm text-gray-500">ä¸€æœˆ</div>
                        <div class="text-xl font-bold text-gray-700" id="month-1">0</div>
                    </div>
                    <div class="text-center p-3 bg-gray-50 rounded-lg hover-pop">
                        <div class="text-sm text-gray-500">äºŒæœˆ</div>
                        <div class="text-xl font-bold text-gray-700" id="month-2">0</div>
                    </div>
                    <div class="text-center p-3 bg-gray-50 rounded-lg hover-pop">
                        <div class="text-sm text-gray-500">ä¸‰æœˆ</div>
                        <div class="text-xl font-bold text-gray-700" id="month-3">0</div>
                    </div>
                    <div class="text-center p-3 bg-gray-50 rounded-lg hover-pop">
                        <div class="text-sm text-gray-500">å››æœˆ</div>
                        <div class="text-xl font-bold text-gray-700" id="month-4">0</div>
                    </div>
                    <div class="text-center p-3 bg-gray-50 rounded-lg hover-pop">
                        <div class="text-sm text-gray-500">äº”æœˆ</div>
                        <div class="text-xl font-bold text-gray-700" id="month-5">0</div>
                    </div>
                    <div class="text-center p-3 bg-gray-50 rounded-lg hover-pop">
                        <div class="text-sm text-gray-500">å…­æœˆ</div>
                        <div class="text-xl font-bold text-gray-700" id="month-6">0</div>
                    </div>
                    <div class="text-center p-3 bg-gray-50 rounded-lg hover-pop">
                        <div class="text-sm text-gray-500">ä¸ƒæœˆ</div>
                        <div class="text-xl font-bold text-gray-700" id="month-7">0</div>
                    </div>
                    <div class="text-center p-3 bg-gray-50 rounded-lg hover-pop">
                        <div class="text-sm text-gray-500">å…«æœˆ</div>
                        <div class="text-xl font-bold text-gray-700" id="month-8">0</div>
                    </div>
                    <div class="text-center p-3 bg-gray-50 rounded-lg hover-pop">
                        <div class="text-sm text-gray-500">ä¹æœˆ</div>
                        <div class="text-xl font-bold text-gray-700" id="month-9">0</div>
                    </div>
                    <div class="text-center p-3 bg-gray-50 rounded-lg hover-pop">
                        <div class="text-sm text-gray-500">åæœˆ</div>
                        <div class="text-xl font-bold text-gray-700" id="month-10">0</div>
                    </div>
                    <div class="text-center p-3 bg-gray-50 rounded-lg hover-pop">
                        <div class="text-sm text-gray-500">åä¸€æœˆ</div>
                        <div class="text-xl font-bold text-gray-700" id="month-11">0</div>
                    </div>
                    <div class="text-center p-3 bg-gray-50 rounded-lg hover-pop">
                        <div class="text-sm text-gray-500">åäºŒæœˆ</div>
                        <div class="text-xl font-bold text-gray-700" id="month-12">0</div>
                    </div>
                </div>
            </div>
            
            <p class="text-gray-500 text-sm">æœ€åæ›´æ–°: <span id="lastUpdated">ä»æœªæ›´æ–°</span></p>
        </div>
    </div>

    <!-- æ·»åŠ ç”Ÿæ—¥è¡¨å• -->
    <div id="addButtonContainer" class="fixed bottom-[30px] right-[30px] z-50 hidden">
        <div class="add-form" id="addForm">
            <div class="bg-white rounded-2xl p-6 w-full max-w-md fairy-shadow">
                <h3 class="text-xl font-bold text-gray-700 mb-4">æ·»åŠ ç”Ÿæ—¥</h3>
                <form id="birthdayForm">
                    <div class="mb-4">
                        <label for="name" class="block text-gray-600 mb-2">å§“å</label>
                        <input type="text" id="name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fairyPink/50" placeholder="è¯·è¾“å…¥å§“å" required>
                    </div>
                    
                    <div class="mb-4">
                        <label for="birthday" class="block text-gray-600 mb-2">ç”Ÿæ—¥æ—¥æœŸ</label>
                        <input type="date" id="birthday" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fairyPink/50" required>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">å¤´åƒ</label>
                        <div class="avatar-upload-container">
                            <div class="flex items-center mb-3">
                                <div class="avatar-preview w-20 h-20 rounded-full bg-gray-200 overflow-hidden mr-4">
                                    <img id="avatarPreview" src="https://picsum.photos/200/200?random=1" alt="å¤´åƒé¢„è§ˆ" class="w-full h-full object-cover">
                                </div>
                                <div>
                                    <button type="button" id="uploadBtn" class="bg-fairyPink text-white font-medium py-1 px-3 rounded-full text-sm hover:bg-fairyPink/90 mr-2">
                                        <i class="fa fa-upload mr-1"></i> ä¸Šä¼ å›¾ç‰‡
                                    </button>
                                    <input type="file" id="imageUpload" accept="image/*" class="hidden">
                                </div>
                            </div>
                            <div>
                                <label for="imageUrl" class="block text-gray-600 mb-1 text-sm">æˆ–è¾“å…¥å›¾ç‰‡é“¾æ¥</label>
                                <input type="url" id="imageUrl" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fairyPink/50 text-sm" placeholder="https://example.com/avatar.jpg">
                                <p class="text-gray-400 text-xs mt-1">æ”¯æŒJPGã€PNGç­‰æ ¼å¼çš„å›¾ç‰‡é“¾æ¥</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label for="note" class="block text-gray-600 mb-2">å¤‡æ³¨ (å¯é€‰)</label>
                        <textarea id="note" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fairyPink/50" rows="2" placeholder="æ·»åŠ ä¸€äº›å¤‡æ³¨ä¿¡æ¯..."></textarea>
                    </div>
                    
                    <div class="flex gap-3">
                        <button type="button" id="closeForm" class="w-1/3 py-3 px-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                            å–æ¶ˆ
                        </button>
                        <button type="submit" class="w-2/3 bg-gradient-to-r from-fairyPink to-fairyPurple text-white font-bold py-3 px-4 rounded-lg hover-pop">
                            <i class="fa fa-magic mr-2"></i> æ·»åŠ ç”Ÿæ—¥
                        </button>
                    </div>
                </form>
            </div>
        </div>
        
        <button id="addButton" class="w-16 h-16 rounded-full bg-gradient-to-r from-fairyPink to-fairyPurple text-white shadow-lg flex items-center justify-center text-2xl hover-pop">
            <i class="fa fa-plus"></i>
        </button>
    </div>

    <!-- é€šçŸ¥ç»„ä»¶ -->
    <div class="fixed top-20 left-1/2 transform -translate-x-1/2 bg-white shadow-lg rounded-lg p-4 flex items-center z-50 hidden" id="notification">
        <div class="mr-3">
            <i class="fa fa-info-circle text-xl text-fairyPink"></i>
        </div>
        <div class="flex-1">
            <div class="font-bold text-gray-800" id="notificationTitle"></div>
            <div class="text-gray-600" id="notificationMessage"></div>
        </div>
        <button class="ml-3 text-gray-400 hover:text-gray-600" id="closeNotification">
            <i class="fa fa-times"></i>
        </button>
    </div>

    <!-- èƒŒæ™¯éŸ³ä¹å…ƒç´  -->
    <audio id="backgroundMusic" loop>
        <!-- éŸ³ä¹æ–‡ä»¶ä¼šé€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
    </audio>

    <script>
        // ç«¥è¯é£æ ¼é¢œè‰²ä¸»é¢˜åˆ—è¡¨
        const fairyThemes = [
            'theme-pink',
            'theme-blue',
            'theme-purple',
            'theme-green',
            'theme-yellow',
            'theme-orange',
            'theme-teal'
        ];

        // éšæœºè·å–ä¸€ä¸ªç«¥è¯é£æ ¼ä¸»é¢˜
        function getRandomFairyTheme() {
            return fairyThemes[Math.floor(Math.random() * fairyThemes.length)];
        }

        // åˆ›å»ºç²’å­èƒŒæ™¯
        function createParticles() {
            const container = document.getElementById('particles-container');
            if (!container) return;
            
            // æ¸…é™¤ç°æœ‰ç²’å­
            container.innerHTML = '';
            
            // ç²’å­é¢œè‰² - ç«¥è¯é£æ ¼
            const particleColors = [
                '#FF6B8B', '#6BBEF5', '#B794F4', 
                '#6BCB77', '#FFD93D', '#FF9F43', '#4DD0E1'
            ];
            
            // åˆ›å»ºç²’å­
            const particleCount = window.innerWidth < 768 ? 20 : 40;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // éšæœºå¤§å°
                const size = Math.random() * 8 + 2;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                // éšæœºä½ç½®
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                
                // éšæœºé¢œè‰²
                particle.style.backgroundColor = particleColors[Math.floor(Math.random() * particleColors.length)];
                
                // éšæœºåŠ¨ç”»å»¶è¿Ÿ
                particle.style.animationDelay = `${Math.random() * 5}s`;
                
                container.appendChild(particle);
            }
        }

        // å¯¼èˆªåŠŸèƒ½å®ç° - ä¿®å¤å¯¼èˆªæ æ— æ³•å±•å¼€é—®é¢˜
        function initNavigation() {
            const navToggle = document.getElementById('navToggle');
            const navItems = document.getElementById('navItems');
            const navButtons = document.querySelectorAll('.nav-item');
            let isNavOpen = false;

            // å¯¼èˆªåˆ‡æ¢æŒ‰é’® - ç®€åŒ–é€»è¾‘å¹¶ç¡®ä¿æ­£ç¡®å·¥ä½œ
            if (navToggle && navItems) {
                // ç¡®ä¿åˆå§‹çŠ¶æ€æ­£ç¡®
                navItems.classList.add('hidden');
                
                navToggle.addEventListener('click', (e) => {
                    e.stopPropagation();
                    isNavOpen = !isNavOpen;
                    
                    if (isNavOpen) {
                        navItems.classList.remove('hidden');
                        // æ›´æ–°å›¾æ ‡
                        const icon = navToggle.querySelector('i');
                        icon.className = 'fa fa-times text-fairyPink text-xl';
                    } else {
                        navItems.classList.add('hidden');
                        // æ›´æ–°å›¾æ ‡
                        const icon = navToggle.querySelector('i');
                        icon.className = 'fa fa-magic text-fairyPink text-xl';
                    }
                });

                // å¯¼èˆªæŒ‰é’®ç‚¹å‡»äº‹ä»¶
                navButtons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const targetId = button.id.replace('Nav', 'Page');
                        navigateToPage(targetId);
                        
                        // å…³é—­å¯¼èˆªèœå•
                        isNavOpen = false;
                        navItems.classList.add('hidden');
                        const icon = navToggle.querySelector('i');
                        icon.className = 'fa fa-magic text-fairyPink text-xl';
                    });
                });

                // ç‚¹å‡»å…¶ä»–åŒºåŸŸå…³é—­å¯¼èˆª
                document.addEventListener('click', (e) => {
                    if (!navItems.contains(e.target) && !navToggle.contains(e.target) && isNavOpen) {
                        isNavOpen = false;
                        navItems.classList.add('hidden');
                        const icon = navToggle.querySelector('i');
                        icon.className = 'fa fa-magic text-fairyPink text-xl';
                    }
                });
            }

            // é¡µé¢å¯¼èˆªæŒ‰é’®
            const goToBirthdayBtn = document.getElementById('goToBirthdayBtn');
            const goToGalleryBtn = document.getElementById('goToGalleryBtn');
            const startJourneyBtn = document.getElementById('startJourneyBtn');
            const mainStartBtn = document.getElementById('mainStartBtn');
            const secondaryStartBtn = document.getElementById('secondaryStartBtn');

            if (goToBirthdayBtn) {
                goToBirthdayBtn.addEventListener('click', () => navigateToPage('birthdayPage'));
            }
            
            if (goToGalleryBtn) {
                goToGalleryBtn.addEventListener('click', () => navigateToPage('galleryPage'));
            }
            
            if (startJourneyBtn) {
                startJourneyBtn.addEventListener('click', () => {
                    navigateToPage('birthdayPage');
                    setTimeout(() => toggleAddForm(true), 500);
                });
            }
            
            if (mainStartBtn) {
                mainStartBtn.addEventListener('click', () => {
                    navigateToPage('birthdayPage');
                    setTimeout(() => toggleAddForm(true), 500);
                });
            }
            
            if (secondaryStartBtn) {
                secondaryStartBtn.addEventListener('click', () => toggleAddForm(true));
            }
        }

        // é¡µé¢å¯¼èˆªå‡½æ•°
        function navigateToPage(pageId) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                page.classList.remove('active');
            });

            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
                // æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                // æ§åˆ¶æ·»åŠ æŒ‰é’®çš„æ˜¾ç¤º - åªåœ¨ç”Ÿæ—¥é¡µé¢æ˜¾ç¤º
                const addButtonContainer = document.getElementById('addButtonContainer');
                if (addButtonContainer) {
                    if (pageId === 'birthdayPage') {
                        addButtonContainer.classList.remove('hidden');
                    } else {
                        addButtonContainer.classList.add('hidden');
                        // ç¡®ä¿è¡¨å•å…³é—­
                        toggleAddForm(false);
                    }
                }
            }
        }

        // éŸ³ä¹æ’­æ”¾ç»„ä»¶å¢å¼º
        function initMusicPlayer() {
            const musicElement = document.getElementById('backgroundMusic');
            const playPauseBtn = document.getElementById('playPauseBtn');
            const mobilePlayPauseBtn = document.getElementById('mobilePlayPauseBtn');
            const prevTrackBtn = document.getElementById('prevTrack');
            const nextTrackBtn = document.getElementById('nextTrack');
            const volumeSlider = document.getElementById('volumeSlider');
            const mobileVolumeSlider = document.getElementById('mobileVolumeSlider');
            const progressBar = document.getElementById('progressBar');
            const progressContainer = document.querySelector('.music-progress');
            const currentTrackEl = document.getElementById('currentTrack');
            
            // éŸ³ä¹çŠ¶æ€
            let isPlaying = false;
            let currentTrackIndex = 0;
            
            // éŸ³ä¹æ–‡ä»¶åˆ—è¡¨ - ä¸°å¯Œæ›²ç›®
            const musicFiles = [
                { file: 'Music/1.mp3', name: 'Andrew Prahlow - Travelersencore' },
                { file: 'Music/2.mp3', name: 'æ±Ÿè¯­ - Cable Car' },
                { file: 'Music/3.mp3', name: 'beabadoobee - Coffee' },
                { file: 'Music/4.mp3', name: 'fcj&Alys&demxntia - Gamble' },
                { file: 'Music/5.mp3', name: 'White Cherry - MELANCHOLY' },
                { file: 'Music/6.mp3', name: 'mj apanay&aren park - Time Machine' }
            ];

            // åˆå§‹åŒ–ç¬¬ä¸€ä¸ªéŸ³ä¹
            loadMusic(currentTrackIndex);

            // æ’­æ”¾/æš‚åœæŒ‰é’®äº‹ä»¶
            function setupPlayPause(btn) {
                if (btn) {
                    btn.addEventListener('click', togglePlayPause);
                }
            }
            
            setupPlayPause(playPauseBtn);
            setupPlayPause(mobilePlayPauseBtn);

            // ä¸Šä¸€æ›²/ä¸‹ä¸€æ›²æŒ‰é’®
            if (prevTrackBtn) {
                prevTrackBtn.addEventListener('click', playPrevTrack);
            }
            
            if (nextTrackBtn) {
                nextTrackBtn.addEventListener('click', playNextTrack);
            }

            // éŸ³é‡æ§åˆ¶ - åŒæ­¥æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡çš„éŸ³é‡æ§åˆ¶
            function setupVolumeControl(slider, isMobile = false) {
                if (slider) {
                    slider.addEventListener('input', () => {
                        const volume = slider.value / 100;
                        musicElement.volume = volume;
                        
                        // åŒæ­¥å¦ä¸€ä¸ªæ»‘å—
                        if (isMobile && volumeSlider) {
                            volumeSlider.value = slider.value;
                        } else if (!isMobile && mobileVolumeSlider) {
                            mobileVolumeSlider.value = slider.value;
                        }
                        
                        // ä¿å­˜éŸ³é‡è®¾ç½®
                        localStorage.setItem('musicVolume', volume);
                    });
                }
            }
            
            setupVolumeControl(volumeSlider);
            setupVolumeControl(mobileVolumeSlider, true);
            
            // åŠ è½½ä¿å­˜çš„éŸ³é‡
            const savedVolume = localStorage.getItem('musicVolume');
            if (savedVolume !== null) {
                musicElement.volume = parseFloat(savedVolume);
                if (volumeSlider) volumeSlider.value = parseFloat(savedVolume) * 100;
                if (mobileVolumeSlider) mobileVolumeSlider.value = parseFloat(savedVolume) * 100;
            }

            // è¿›åº¦æ¡æ›´æ–°
            musicElement.addEventListener('timeupdate', updateProgress);

            // ç‚¹å‡»è¿›åº¦æ¡è·³è½¬
            if (progressContainer) {
                progressContainer.addEventListener('click', (e) => {
                    const width = progressContainer.clientWidth;
                    const clickX = e.offsetX;
                    const duration = musicElement.duration;
                    musicElement.currentTime = (clickX / width) * duration;
                });
            }

            // éŸ³ä¹ç»“æŸæ—¶è‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€é¦–
            musicElement.addEventListener('ended', playNextTrack);

            // æ’­æ”¾/æš‚åœåˆ‡æ¢
            function togglePlayPause() {
                if (isPlaying) {
                    musicElement.pause();
                    if (playPauseBtn) playPauseBtn.innerHTML = '<i class="fa fa-play"></i>';
                    if (mobilePlayPauseBtn) mobilePlayPauseBtn.innerHTML = '<i class="fa fa-play"></i>';
                } else {
                    musicElement.play()
                        .then(() => {
                            if (playPauseBtn) playPauseBtn.innerHTML = '<i class="fa fa-pause"></i>';
                            if (mobilePlayPauseBtn) mobilePlayPauseBtn.innerHTML = '<i class="fa fa-pause"></i>';
                        })
                        .catch(error => {
                            console.error('æ’­æ”¾å¤±è´¥:', error);
                            showNotification('æ’­æ”¾å¤±è´¥', 'æµè§ˆå™¨é˜»æ­¢äº†è‡ªåŠ¨æ’­æ”¾ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»æ’­æ”¾æŒ‰é’®');
                        });
                }
                isPlaying = !isPlaying;
            }

            // åŠ è½½éŸ³ä¹
            function loadMusic(index) {
                if (index >= 0 && index < musicFiles.length) {
                    currentTrackIndex = index;
                    const track = musicFiles[index];
                    musicElement.src = track.file;
                    if (currentTrackEl) currentTrackEl.textContent = track.name;
                    
                    // å¦‚æœä¹‹å‰æ˜¯æ’­æ”¾çŠ¶æ€ï¼Œç»§ç»­æ’­æ”¾
                    if (isPlaying) {
                        musicElement.play().catch(error => {
                            console.error('æ’­æ”¾å¤±è´¥:', error);
                        });
                    }
                }
            }

            // æ’­æ”¾ä¸Šä¸€é¦–
            function playPrevTrack() {
                let prevIndex = currentTrackIndex - 1;
                if (prevIndex < 0) {
                    prevIndex = musicFiles.length - 1; // å¾ªç¯æ’­æ”¾
                }
                loadMusic(prevIndex);
            }

            // æ’­æ”¾ä¸‹ä¸€é¦–
            function playNextTrack() {
                let nextIndex = currentTrackIndex + 1;
                if (nextIndex >= musicFiles.length) {
                    nextIndex = 0; // å¾ªç¯æ’­æ”¾
                }
                loadMusic(nextIndex);
            }

            // æ›´æ–°è¿›åº¦æ¡
            function updateProgress() {
                const { currentTime, duration } = musicElement;
                if (isNaN(duration)) return;
                
                const progressPercent = (currentTime / duration) * 100;
                if (progressBar) progressBar.style.width = `${progressPercent}%`;
            }
        }

        // ä¸»é¡µåŠŸèƒ½ - é‡ç‚¹ä¼˜åŒ–å³å°†åˆ°æ¥çš„ç”Ÿæ—¥æ ·å¼
        function initHomePage() {
            // åŠ è½½æœ€è¿‘ç”Ÿæ—¥
            loadUpcomingBirthdays();
        }

        // åŠ è½½å³å°†åˆ°æ¥çš„ç”Ÿæ—¥ï¼ˆ1.35æ ·å¼ï¼‰
        function loadUpcomingBirthdays() {
            const container = document.getElementById('upcomingBirthdays');
            if (!container) return;
            
            // ä»æœ¬åœ°å­˜å‚¨è·å–ç”Ÿæ—¥æ•°æ®
            const birthdays = JSON.parse(localStorage.getItem('birthdays') || '[]');
            
            if (birthdays.length === 0) {
                container.innerHTML = `
                    <div class="bg-white rounded-2xl p-8 fairy-shadow text-center">
                        <i class="fa fa-calendar-o text-5xl mb-4 text-gray-200"></i>
                        <p class="text-gray-500">æ·»åŠ ç¬¬ä¸€ä¸ªç”Ÿæ—¥è®°å½•ï¼Œå¼€å§‹ä½ çš„å€’è®¡æ—¶ä¹‹æ—…å§ï¼</p>
                        <button id="homeAddFirstBtn" class="mt-6 bg-gradient-to-r from-fairyPink to-fairyPurple text-white font-bold py-3 px-8 rounded-full hover-pop">
                            æ·»åŠ ç¬¬ä¸€ä¸ªç”Ÿæ—¥
                        </button>
                    </div>
                `;
                
                // ç»‘å®šæ·»åŠ æŒ‰é’®äº‹ä»¶
                document.getElementById('homeAddFirstBtn').addEventListener('click', () => {
                    navigateToPage('birthdayPage');
                    setTimeout(() => toggleAddForm(true), 500);
                });
                return;
            }
            
            // æ’åºï¼šæœ€è¿‘çš„ç”Ÿæ—¥æ’åœ¨å‰é¢
            const sortedBirthdays = [...birthdays].sort((a, b) => {
                const daysA = getDaysUntilNextBirthday(new Date(a.date));
                const daysB = getDaysUntilNextBirthday(new Date(b.date));
                return daysA - daysB;
            });
            
            // åªæ˜¾ç¤ºæœ€è¿‘çš„2ä¸ªç”Ÿæ—¥
            const upcoming = sortedBirthdays.slice(0, 2);
            
            let html = '';
            upcoming.forEach((birthday, index) => {
                const daysUntil = getDaysUntilNextBirthday(new Date(birthday.date));
                const birthDate = new Date(birthday.date);
                const formattedDate = `${birthDate.getMonth() + 1}æœˆ${birthDate.getDate()}æ—¥`;
                
                // éšæœºèƒŒæ™¯é¢œè‰²
                const bgColors = [
                    'bg-gradient-to-r from-pink-100 to-purple-100',
                    'bg-gradient-to-r from-blue-100 to-teal-100',
                    'bg-gradient-to-r from-green-100 to-yellow-100'
                ];
                const bgColor = bgColors[index % bgColors.length];
                
                html += `
                    <div class="upcoming-birthday fairy-shadow mb-6">
                        <div class="upcoming-header ${bgColor} p-6">
                            <div class="relative z-10 flex flex-col md:flex-row items-center justify-between">
                                <div class="flex items-center mb-4 md:mb-0">
                                    <div class="upcoming-avatar rounded-full overflow-hidden mr-4">
                                        <img src="${birthday.avatar || 'https://picsum.photos/200/200?random=1'}" alt="${birthday.name}" class="w-full h-full object-cover">
                                    </div>
                                    <div>
                                        <h3 class="text-2xl font-bold text-white text-shadow-fairy">${birthday.name}</h3>
                                        <p class="text-white/90">${formattedDate} ${daysUntil === 0 ? '<span class="font-bold">ä»Šå¤©ç”Ÿæ—¥ï¼ğŸ‰</span>' : ''}</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-center">
                                    ${daysUntil === 0 ? 
                                        '<span class="bg-white text-fairyPink font-bold py-2 px-4 rounded-full animate-pulse-slow">ä»Šå¤©ç”Ÿæ—¥ï¼</span>' : 
                                        `<div class="flex gap-2">
                                            <div class="countdown-box-upcoming px-3 py-2">
                                                <div class="text-2xl font-bold countdown-glow">${Math.floor(daysUntil / 30)}</div>
                                                <div class="text-xs text-gray-600">æœˆ</div>
                                            </div>
                                            <div class="countdown-box-upcoming px-3 py-2">
                                                <div class="text-2xl font-bold countdown-glow">${daysUntil % 30}</div>
                                                <div class="text-xs text-gray-600">å¤©</div>
                                            </div>
                                        </div>`
                                    }
                                </div>
                            </div>
                        </div>
                        
                        ${birthday.note ? 
                            `<div class="p-4 bg-gray-50">
                                <p class="text-gray-600 italic"><i class="fa fa-comment text-fairyPink mr-1"></i> ${birthday.note}</p>
                            </div>` : ''
                        }
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // æ ¼å¼åŒ–æ—¥æœŸæ˜¾ç¤º
        function formatDate(date) {
            const month = date.getMonth() + 1;
            const day = date.getDate();
            return `${month}æœˆ${day}æ—¥`;
        }

        // è·å–è·ç¦»ä¸‹ä¸€ä¸ªç”Ÿæ—¥çš„å¤©æ•°
        function getDaysUntilNextBirthday(birthDate) {
            const today = new Date();
            let nextBirthday = new Date(today.getFullYear(), birthDate.getMonth(), birthDate.getDate());
            
            // å¦‚æœä»Šå¹´çš„ç”Ÿæ—¥å·²ç»è¿‡äº†ï¼Œè®¡ç®—æ˜å¹´çš„
            if (nextBirthday < today) {
                nextBirthday.setFullYear(nextBirthday.getFullYear() + 1);
            }
            
            // è®¡ç®—å¤©æ•°å·®
            const diffTime = nextBirthday - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            return diffDays;
        }

        // ç”Ÿæ—¥å€’è®¡æ—¶åŠŸèƒ½ - ä¿®å¤æ’åºé—®é¢˜
        let birthdays = [];
        let nearestBirthdayEl;

        function initBirthdayCountdown() {
            // è·å–DOMå…ƒç´ 
            nearestBirthdayEl = document.getElementById('nearestBirthday');
            const addButton = document.getElementById('addButton');
            const addForm = document.getElementById('addForm');
            const closeForm = document.getElementById('closeForm');
            const birthdayForm = document.getElementById('birthdayForm');
            const uploadBtn = document.getElementById('uploadBtn');
            const imageUpload = document.getElementById('imageUpload');
            const avatarPreview = document.getElementById('avatarPreview');
            const imageUrlInput = document.getElementById('imageUrl');
            
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç”Ÿæ—¥æ•°æ®
            loadBirthdays();
            
            // äº‹ä»¶ç›‘å¬
            if (addButton) {
                addButton.addEventListener('click', () => toggleAddForm(true));
            }
            
            if (closeForm) {
                closeForm.addEventListener('click', () => toggleAddForm(false));
            }
            
            if (birthdayForm) {
                birthdayForm.addEventListener('submit', handleFormSubmit);
            }
            
            // å¤´åƒä¸Šä¼ 
            if (uploadBtn && imageUpload) {
                uploadBtn.addEventListener('click', () => imageUpload.click());
                
                imageUpload.addEventListener('change', (e) => {
                    if (e.target.files && e.target.files[0]) {
                        const reader = new FileReader();
                        
                        reader.onload = (e) => {
                            avatarPreview.src = e.target.result;
                            imageUrlInput.value = e.target.result;
                        };
                        
                        reader.readAsDataURL(e.target.files[0]);
                    }
                });
            }
            
            // å›¾ç‰‡é“¾æ¥è¾“å…¥
            if (imageUrlInput) {
                imageUrlInput.addEventListener('change', () => {
                    const url = imageUrlInput.value.trim();
                    if (url) {
                        // å°è¯•åŠ è½½å›¾ç‰‡
                        const img = new Image();
                        img.onload = () => {
                            avatarPreview.src = url;
                        };
                        img.onerror = () => {
                            showNotification('å›¾ç‰‡é”™è¯¯', 'æ— æ³•åŠ è½½è¯¥å›¾ç‰‡é“¾æ¥ï¼Œè¯·æ£€æŸ¥URLæ˜¯å¦æ­£ç¡®');
                        };
                        img.src = url;
                    }
                });
            }
            
            // åˆå§‹åŒ–å€’è®¡æ—¶æ›´æ–°
            setInterval(updateAllCountdowns, 1000);
        }

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç”Ÿæ—¥æ•°æ®
        function loadBirthdays() {
            const savedBirthdays = localStorage.getItem('birthdays');
            birthdays = savedBirthdays ? JSON.parse(savedBirthdays) : [];
            
            // æ›´æ–°UI
            renderBirthdayList();
            updateNearestBirthday();
            updateBirthdayCount();
            updateLastUpdated();
        }

        // ä¿å­˜ç”Ÿæ—¥æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
        function saveBirthdays() {
            localStorage.setItem('birthdays', JSON.stringify(birthdays));
            updateLastUpdated();
            
            // åŒæ—¶æ›´æ–°ä¸»é¡µçš„æœ€è¿‘ç”Ÿæ—¥
            loadUpcomingBirthdays();
            // åŒæ—¶æ›´æ–°å±•é¦†æ•°æ®
            updateGalleryStats();
        }

        // å¤„ç†è¡¨å•æäº¤
        function handleFormSubmit(e) {
            e.preventDefault();
            
            const nameInput = document.getElementById('name');
            const dateInput = document.getElementById('birthday');
            const noteInput = document.getElementById('note');
            const imageUrlInput = document.getElementById('imageUrl');
            
            if (!nameInput.value || !dateInput.value) {
                showNotification('è¾“å…¥é”™è¯¯', 'è¯·å¡«å†™å§“åå’Œç”Ÿæ—¥æ—¥æœŸ');
                return;
            }
            
            // éªŒè¯æ—¥æœŸæ ¼å¼
            const birthDate = new Date(dateInput.value);
            if (isNaN(birthDate.getTime())) {
                showNotification('è¾“å…¥é”™è¯¯', 'è¯·è¾“å…¥æœ‰æ•ˆçš„æ—¥æœŸ');
                return;
            }
            
            // åˆ›å»ºæ–°ç”Ÿæ—¥å¯¹è±¡
            const newBirthday = {
                id: Date.now().toString(),
                name: nameInput.value.trim(),
                date: dateInput.value,
                note: noteInput.value.trim(),
                avatar: imageUrlInput.value || 'https://picsum.photos/200/200?random=1',
                added: new Date().toISOString(),
                theme: getRandomFairyTheme() // éšæœºåˆ†é…ç«¥è¯é£æ ¼ä¸»é¢˜
            };
            
            // æ·»åŠ åˆ°æ•°ç»„å¹¶ä¿å­˜
            birthdays.push(newBirthday);
            saveBirthdays();
            
            // æ›´æ–°UI
            renderBirthdayList();
            updateNearestBirthday();
            updateBirthdayCount();
            
            // é‡ç½®è¡¨å•å¹¶å…³é—­
            birthdayForm.reset();
            // æ¢å¤é»˜è®¤å¤´åƒ
            avatarPreview.src = 'https://picsum.photos/200/200?random=1';
            imageUrlInput.value = '';
            toggleAddForm(false);
            
            showNotification('æ·»åŠ æˆåŠŸ', `${newBirthday.name}çš„ç”Ÿæ—¥å·²æ·»åŠ `);
        }

        // æ¸²æŸ“ç”Ÿæ—¥åˆ—è¡¨ï¼ˆ1.2æ ·å¼åŸºç¡€ä¸Šä¸°å¯Œï¼Œä½¿ç”¨éšæœºç«¥è¯é£æ ¼é¢œè‰²ï¼‰
        function renderBirthdayList() {
            const listContainer = document.getElementById('birthdaysList');
            if (!listContainer) return;
            
            if (birthdays.length === 0) {
                listContainer.innerHTML = `
                    <div class="text-center text-gray-500 py-12 bg-white rounded-2xl fairy-shadow">
                        <i class="fa fa-calendar-o text-4xl mb-4 opacity-30"></i>
                        <p>è¿˜æ²¡æœ‰æ·»åŠ ä»»ä½•ç”Ÿæ—¥è®°å½•</p>
                        <button id="secondaryStartBtn" class="mt-4 bg-gradient-to-r from-fairyPink to-fairyPurple text-white font-bold py-2 px-6 rounded-full hover-pop">æ·»åŠ ç¬¬ä¸€ä¸ªç”Ÿæ—¥</button>
                    </div>
                `;
                
                // é‡æ–°ç»‘å®šæŒ‰é’®äº‹ä»¶
                document.getElementById('secondaryStartBtn').addEventListener('click', () => toggleAddForm(true));
                return;
            }
            
            // æŒ‰æ—¥æœŸæ’åº
            const sortedBirthdays = [...birthdays].sort((a, b) => {
                const daysA = getDaysUntilNextBirthday(new Date(a.date));
                const daysB = getDaysUntilNextBirthday(new Date(b.date));
                return daysA - daysB;
            });
            
            let html = '';
            sortedBirthdays.forEach(birthday => {
                const birthDate = new Date(birthday.date);
                const daysUntil = getDaysUntilNextBirthday(birthDate);
                const formattedDate = formatDate(birthDate);
                const countdownHtml = getCountdownHtml(birthday.date);
                
                // å¦‚æœæ²¡æœ‰ä¸»é¢˜ï¼Œéšæœºåˆ†é…ä¸€ä¸ª
                const theme = birthday.theme || getRandomFairyTheme();
                
                html += `
                    <div class="birthday-card bg-white rounded-2xl p-6 fairy-shadow ${theme}" data-id="${birthday.id}">
                        <div class="text-center">
                            <div class="w-20 h-20 rounded-full overflow-hidden mx-auto mb-4 border-4 white">
                                <img src="${birthday.avatar || 'https://picsum.photos/200/200?random=1'}" alt="${birthday.name}" class="w-full h-full object-cover">
                            </div>
                            <h3 class="text-xl font-bold mb-1">${birthday.name}</h3>
                            <p class="text-gray-600 mb-4">${formattedDate} ${daysUntil === 0 ? '<span class="text-fairyPink font-bold">ä»Šå¤©ç”Ÿæ—¥ï¼ğŸ‰</span>' : ''}</p>
                            
                            <div class="flex justify-center gap-2 mb-4 countdown-container">
                                ${countdownHtml}
                            </div>
                            
                            ${birthday.note ? `<p class="text-gray-600 text-sm italic mb-4"><i class="fa fa-comment-o mr-1"></i> ${birthday.note}</p>` : ''}
                            
                            <div class="flex justify-center gap-3">
                                <button class="edit-btn px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors" data-id="${birthday.id}">
                                    <i class="fa fa-edit mr-1"></i> ç¼–è¾‘
                                </button>
                                <button class="delete-btn px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors" data-id="${birthday.id}">
                                    <i class="fa fa-trash mr-1"></i> åˆ é™¤
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            listContainer.innerHTML = html;
            
            // ç»‘å®šç¼–è¾‘å’Œåˆ é™¤äº‹ä»¶
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = e.currentTarget.dataset.id;
                    deleteBirthday(id);
                });
            });
            
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = e.currentTarget.dataset.id;
                    editBirthday(id);
                });
            });
        }

        // æ›´æ–°æœ€è¿‘çš„ç”Ÿæ—¥
        function updateNearestBirthday() {
            if (!nearestBirthdayEl) return;
            
            if (birthdays.length === 0) {
                nearestBirthdayEl.innerHTML = '<p class="text-gray-500 text-center">æ·»åŠ ç¬¬ä¸€ä¸ªç”Ÿæ—¥æ¥å¼€å§‹å€’è®¡æ—¶</p>';
                return;
            }

            // æ‰¾åˆ°æœ€è¿‘çš„ç”Ÿæ—¥
            const sortedBirthdays = [...birthdays].sort((a, b) => {
                const daysA = getDaysUntilNextBirthday(new Date(a.date));
                const daysB = getDaysUntilNextBirthday(new Date(b.date));
                return daysA - daysB;
            });

            const nearest = sortedBirthdays[0];
            const daysUntil = getDaysUntilNextBirthday(new Date(nearest.date));
            const birthDate = new Date(nearest.date);
            const formattedDate = formatDate(birthDate);
            
            // æ˜¾ç¤ºæœ€è¿‘ç”Ÿæ—¥ä¿¡æ¯
            nearestBirthdayEl.innerHTML = `
                <div class="flex flex-col md:flex-row items-center justify-between">
                    <div class="flex items-center mb-4 md:mb-0">
                        <div class="w-16 h-16 rounded-full overflow-hidden mr-4 border-2 solid ${nearest.theme ? nearest.theme.replace('theme-', 'border-fairy') : 'border-fairyPink'}">
                            <img src="${nearest.avatar || 'https://picsum.photos/200/200?random=1'}" alt="${nearest.name}" class="w-full h-full object-cover">
                        </div>
                        <div>
                            <h3 class="text-xl font-bold">${nearest.name}</h3>
                            <p class="text-gray-600">${formattedDate}</p>
                        </div>
                    </div>
                    
                    <div class="text-center md:text-right">
                        ${daysUntil === 0 ? 
                            '<p class="text-fairyPink font-bold text-xl animate-pulse-slow">ä»Šå¤©æ˜¯TAçš„ç”Ÿæ—¥ï¼ğŸ‰</p>' : 
                            `<div class="flex justify-center md:justify-end gap-2">
                                ${getCountdownHtml(nearest.date)}
                            </div>`
                        }
                    </div>
                </div>
            `;
        }

        // æ›´æ–°ç”Ÿæ—¥è®¡æ•°
        function updateBirthdayCount() {
            const countEl = document.getElementById('birthdayCount');
            if (countEl) {
                countEl.textContent = birthdays.length;
            }
        }

        // æ›´æ–°æœ€åæ›´æ–°æ—¶é—´
        function updateLastUpdated() {
            const lastUpdatedEl = document.getElementById('lastUpdated');
            if (!lastUpdatedEl) return;
            
            const now = new Date();
            const options = { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };
            lastUpdatedEl.textContent = now.toLocaleString('zh-CN', options);
            
            // ä¿å­˜æœ€åæ›´æ–°æ—¶é—´
            localStorage.setItem('lastUpdated', now.toISOString());
        }

        // åˆ é™¤ç”Ÿæ—¥
        function deleteBirthday(id) {
            const birthday = birthdays.find(b => b.id === id);
            if (!birthday) return;
            
            if (confirm(`ç¡®å®šè¦åˆ é™¤${birthday.name}çš„ç”Ÿæ—¥è®°å½•å—ï¼Ÿ`)) {
                birthdays = birthdays.filter(b => b.id !== id);
                saveBirthdays();
                
                // æ›´æ–°UI
                renderBirthdayList();
                updateNearestBirthday();
                updateBirthdayCount();
                
                showNotification('åˆ é™¤æˆåŠŸ', `${birthday.name}çš„ç”Ÿæ—¥è®°å½•å·²åˆ é™¤`);
            }
        }

        // ç¼–è¾‘ç”Ÿæ—¥
        function editBirthday(id) {
            const birthday = birthdays.find(b => b.id === id);
            if (!birthday) return;
            
            // å¡«å……è¡¨å•
            document.getElementById('name').value = birthday.name;
            document.getElementById('birthday').value = birthday.date;
            document.getElementById('note').value = birthday.note || '';
            document.getElementById('imageUrl').value = birthday.avatar || '';
            document.getElementById('avatarPreview').src = birthday.avatar || 'https://picsum.photos/200/200?random=1';
            
            // æ˜¾ç¤ºè¡¨å•
            toggleAddForm(true);
            
            // ä¿®æ”¹è¡¨å•æäº¤äº‹ä»¶
            const birthdayForm = document.getElementById('birthdayForm');
            const originalSubmitHandler = birthdayForm.onsubmit;
            
            birthdayForm.onsubmit = function(e) {
                e.preventDefault();
                
                const nameInput = document.getElementById('name');
                const dateInput = document.getElementById('birthday');
                const noteInput = document.getElementById('note');
                const imageUrlInput = document.getElementById('imageUrl');
                
                if (!nameInput.value || !dateInput.value) {
                    showNotification('è¾“å…¥é”™è¯¯', 'è¯·å¡«å†™å§“åå’Œç”Ÿæ—¥æ—¥æœŸ');
                    return;
                }
                
                // æ›´æ–°ç”Ÿæ—¥ä¿¡æ¯
                const index = birthdays.findIndex(b => b.id === id);
                if (index !== -1) {
                    birthdays[index] = {
                        ...birthdays[index],
                        name: nameInput.value.trim(),
                        date: dateInput.value,
                        note: noteInput.value.trim(),
                        avatar: imageUrlInput.value || 'https://picsum.photos/200/200?random=1'
                        // ä¿ç•™åŸæœ‰çš„ä¸»é¢˜
                    };
                    
                    saveBirthdays();
                    
                    // æ›´æ–°UI
                    renderBirthdayList();
                    updateNearestBirthday();
                    
                    // é‡ç½®è¡¨å•å¹¶å…³é—­
                    birthdayForm.reset();
                    document.getElementById('avatarPreview').src = 'https://picsum.photos/200/200?random=1';
                    document.getElementById('imageUrl').value = '';
                    toggleAddForm(false);
                    
                    // æ¢å¤åŸå§‹æäº¤äº‹ä»¶
                    birthdayForm.onsubmit = originalSubmitHandler;
                    
                    showNotification('æ›´æ–°æˆåŠŸ', `${birthdays[index].name}çš„ç”Ÿæ—¥å·²æ›´æ–°`);
                }
            };
        }

        // åˆ‡æ¢æ·»åŠ è¡¨å•æ˜¾ç¤ºçŠ¶æ€
        function toggleAddForm(show) {
            const addForm = document.getElementById('addForm');
            const addButton = document.getElementById('addButton');
            
            if (addForm && addButton) {
                if (show) {
                    addForm.classList.add('opacity-100');
                    addForm.classList.remove('opacity-0', 'pointer-events-none', 'translate-y-10');
                    addButton.innerHTML = '<i class="fa fa-times"></i>';
                    addButton.classList.add('scale-110');
                } else {
                    addForm.classList.remove('opacity-100');
                    addForm.classList.add('opacity-0', 'pointer-events-none', 'translate-y-10');
                    addButton.innerHTML = '<i class="fa fa-plus"></i>';
                    addButton.classList.remove('scale-110');
                }
            }
        }

        // è·å–å€’è®¡æ—¶HTML
        function getCountdownHtml(dateString) {
            const birthDate = new Date(dateString);
            const now = new Date();
            
            // è®¡ç®—ä¸‹ä¸€ä¸ªç”Ÿæ—¥
            let nextBirthday = new Date(now.getFullYear(), birthDate.getMonth(), birthDate.getDate());
            if (nextBirthday < now) {
                nextBirthday.setFullYear(nextBirthday.getFullYear() + 1);
            }
            
            // è®¡ç®—å‰©ä½™æ—¶é—´
            const diff = nextBirthday - now;
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            return `
                <div class="bg-gray-50 rounded-lg px-3 py-2 text-center">
                    <div class="font-bold text-lg">${days.toString().padStart(2, '0')}</div>
                    <div class="text-xs text-gray-500">å¤©</div>
                </div>
                <div class="bg-gray-50 rounded-lg px-3 py-2 text-center">
                    <div class="font-bold text-lg">${hours.toString().padStart(2, '0')}</div>
                    <div class="text-xs text-gray-500">æ—¶</div>
                </div>
                <div class="bg-gray-50 rounded-lg px-3 py-2 text-center">
                    <div class="font-bold text-lg">${minutes.toString().padStart(2, '0')}</div>
                    <div class="text-xs text-gray-500">åˆ†</div>
                </div>
                <div class="bg-gray-50 rounded-lg px-3 py-2 text-center">
                    <div class="font-bold text-lg">${seconds.toString().padStart(2, '0')}</div>
                    <div class="text-xs text-gray-500">ç§’</div>
                </div>
            `;
        }

        // æ›´æ–°æ‰€æœ‰å€’è®¡æ—¶ - ä¿®å¤æ’åºåå€’è®¡æ—¶ä¸å¯¹åº”é—®é¢˜
        function updateAllCountdowns() {
            // å…ˆå¯¹ç”Ÿæ—¥è¿›è¡Œæ’åº
            // å…ˆå¯¹ç”Ÿæ—¥è¿›è¡Œæ’åº
            const sortedBirthdays = [...birthdays].sort((a, b) => {
                const daysA = getDaysUntilNextBirthday(new Date(a.date));
                const daysB = getDaysUntilNextBirthday(new Date(b.date));
                return daysA - daysB;
            });
            
            // æ›´æ–°æœ€è¿‘ç”Ÿæ—¥å€’è®¡æ—¶
            updateNearestBirthday();
            
            // æ›´æ–°åˆ—è¡¨ä¸­çš„å€’è®¡æ—¶ - ä½¿ç”¨IDåŒ¹é…è€Œä¸æ˜¯ç´¢å¼•
            const birthdayCards = document.querySelectorAll('.birthday-card');
            birthdayCards.forEach(card => {
                const id = card.dataset.id;
                const birthday = sortedBirthdays.find(b => b.id === id);
                
                if (birthday) {
                    const countdownEl = card.querySelector('.countdown-container');
                    if (countdownEl) {
                        countdownEl.innerHTML = getCountdownHtml(birthday.date);
                    }
                }
            });
            
            // æ›´æ–°ä¸»é¡µå³å°†åˆ°æ¥çš„ç”Ÿæ—¥
            if (document.getElementById('homePage').classList.contains('active')) {
                loadUpcomingBirthdays();
            }
        }

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(title, message) {
            const notification = document.getElementById('notification');
            const titleEl = document.getElementById('notificationTitle');
            const messageEl = document.getElementById('notificationMessage');
            const closeBtn = document.getElementById('closeNotification');
            
            if (!notification || !titleEl || !messageEl) return;
            
            titleEl.textContent = title;
            messageEl.textContent = message;
            
            // æ˜¾ç¤ºé€šçŸ¥
            notification.classList.remove('hidden');
            
            // 3ç§’åè‡ªåŠ¨éšè—
            const timeout = setTimeout(() => {
                notification.classList.add('hidden');
            }, 3000);
            
            // ç‚¹å‡»å…³é—­æŒ‰é’®
            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    notification.classList.add('hidden');
                    clearTimeout(timeout);
                });
            }
        }

        // å±•é¦†é¡µé¢åŠŸèƒ½
        function initGallery() {
            // åŠ è½½æ—¶æ›´æ–°ç»Ÿè®¡æ•°æ®
            updateGalleryStats();
        }

        // æ›´æ–°å±•é¦†ç»Ÿè®¡æ•°æ®
        function updateGalleryStats() {
            // ä»æœ¬åœ°å­˜å‚¨è·å–ç”Ÿæ—¥æ•°æ®
            const birthdays = JSON.parse(localStorage.getItem('birthdays') || '[]');
            const totalCount = birthdays.length;
            
            // æ›´æ–°æ€»è®°å½•æ•°
            const totalCountEl = document.getElementById('profileBirthdayCount');
            if (totalCountEl) {
                totalCountEl.textContent = totalCount;
            }
            
            // è®¡ç®—æœ¬æœˆç”Ÿæ—¥æ•°
            const today = new Date();
            const currentMonth = today.getMonth();
            const thisMonthCount = birthdays.filter(birthday => {
                const birthDate = new Date(birthday.date);
                return birthDate.getMonth() === currentMonth;
            }).length;
            
            // æ›´æ–°æœ¬æœˆç”Ÿæ—¥æ•°
            const thisMonthEl = document.getElementById('profileThisMonth');
            if (thisMonthEl) {
                thisMonthEl.textContent = thisMonthCount;
            }
            
            // è®¡ç®—30å¤©å†…ç”Ÿæ—¥æ•°
            const thirtyDaysLater = new Date();
            thirtyDaysLater.setDate(today.getDate() + 30);
            
            const upcomingCount = birthdays.filter(birthday => {
                const birthDate = new Date(birthday.date);
                const nextBirthday = getNextBirthday(birthDate, today);
                return nextBirthday <= thirtyDaysLater;
            }).length;
            
            // æ›´æ–°30å¤©å†…ç”Ÿæ—¥æ•°
            const upcomingEl = document.getElementById('profileUpcoming');
            if (upcomingEl) {
                upcomingEl.textContent = upcomingCount;
            }
            
            // æ›´æ–°æœˆä»½åˆ†å¸ƒ
            updateMonthDistribution(birthdays);
            
            // æ›´æ–°æœ€åæ›´æ–°æ—¶é—´
            const lastUpdated = localStorage.getItem('lastUpdated');
            const lastUpdatedEl = document.getElementById('lastUpdated');
            if (lastUpdated && lastUpdatedEl) {
                const date = new Date(lastUpdated);
                const options = { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };
                lastUpdatedEl.textContent = date.toLocaleString('zh-CN', options);
            }
        }

        // æ›´æ–°æœˆä»½åˆ†å¸ƒç»Ÿè®¡
        function updateMonthDistribution(birthdays) {
            // åˆå§‹åŒ–æ¯ä¸ªæœˆçš„è®¡æ•°ä¸º0
            const monthCounts = Array(12).fill(0);
            
            // ç»Ÿè®¡æ¯ä¸ªæœˆçš„ç”Ÿæ—¥æ•°é‡
            birthdays.forEach(birthday => {
                const birthDate = new Date(birthday.date);
                const month = birthDate.getMonth(); // 0-11
                monthCounts[month]++;
            });
            
            // æ›´æ–°UI
            monthCounts.forEach((count, index) => {
                const monthEl = document.getElementById(`month-${index + 1}`);
                if (monthEl) {
                    monthEl.textContent = count;
                    
                    // æ ¹æ®æ•°é‡æ·»åŠ ä¸åŒçš„é¢œè‰²
                    monthEl.className = 'text-xl font-bold';
                    if (count === 0) {
                        monthEl.classList.add('text-gray-300');
                    } else if (count === 1) {
                        monthEl.classList.add('text-gray-700');
                    } else if (count === 2) {
                        monthEl.classList.add('text-fairyBlue');
                    } else if (count >= 3) {
                        monthEl.classList.add('text-fairyPink');
                    }
                }
            });
        }

        // è·å–ä¸‹ä¸€ä¸ªç”Ÿæ—¥æ—¥æœŸ
        function getNextBirthday(birthDate, referenceDate) {
            let nextBirthday = new Date(referenceDate.getFullYear(), birthDate.getMonth(), birthDate.getDate());
            
            // å¦‚æœä»Šå¹´çš„ç”Ÿæ—¥å·²ç»è¿‡äº†ï¼Œè®¡ç®—æ˜å¹´çš„
            if (nextBirthday < referenceDate) {
                nextBirthday.setFullYear(nextBirthday.getFullYear() + 1);
            }
            
            return nextBirthday;
        }

        // åˆå§‹åŒ–æ·»åŠ è¡¨å•æ ·å¼
        function initAddFormStyle() {
            const addForm = document.getElementById('addForm');
            if (addForm) {
                // åˆå§‹æ ·å¼
                addForm.classList.add('fixed', 'bottom-[100px]', 'right-[30px]', 'z-50', 'transition-all', 'duration-300', 'opacity-0', 'pointer-events-none', 'translate-y-10');
            }
        }

        // åˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½æ¨¡å—
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            initNavigation();
            initMusicPlayer();
            initBirthdayCountdown();
            initGallery();
            initHomePage();
            initAddFormStyle();
            
            // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°åˆ›å»ºç²’å­
            window.addEventListener('resize', createParticles);
        });
    </script>
</body>
</html>
